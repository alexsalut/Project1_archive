import time

import pandas as pd


class TradingCalendar:
    trading_calendar = ['20230103', '20230104', '20230105', '20230106', '20230109',
                        '20230110', '20230111', '20230112', '20230113', '20230116',
                        '20230117', '20230118', '20230119', '20230120', '20230130',
                        '20230131', '20230201', '20230202', '20230203', '20230206',
                        '20230207', '20230208', '20230209', '20230210', '20230213',
                        '20230214', '20230215', '20230216', '20230217', '20230220',
                        '20230221', '20230222', '20230223', '20230224', '20230227',
                        '20230228', '20230301', '20230302', '20230303', '20230306',
                        '20230307', '20230308', '20230309', '20230310', '20230313',
                        '20230314', '20230315', '20230316', '20230317', '20230320',
                        '20230321', '20230322', '20230323', '20230324', '20230327',
                        '20230328', '20230329', '20230330', '20230331', '20230403',
                        '20230404', '20230406', '20230407', '20230410', '20230411',
                        '20230412', '20230413', '20230414', '20230417', '20230418',
                        '20230419', '20230420', '20230421', '20230424', '20230425',
                        '20230426', '20230427', '20230428', '20230504', '20230505',
                        '20230508', '20230509', '20230510', '20230511', '20230512',
                        '20230515', '20230516', '20230517', '20230518', '20230519',
                        '20230522', '20230523', '20230524', '20230525', '20230526',
                        '20230529', '20230530', '20230531', '20230601', '20230602',
                        '20230605', '20230606', '20230607', '20230608', '20230609',
                        '20230612', '20230613', '20230614', '20230615', '20230616',
                        '20230619', '20230620', '20230621', '20230626', '20230627',
                        '20230628', '20230629', '20230630', '20230703', '20230704',
                        '20230705', '20230706', '20230707', '20230710', '20230711',
                        '20230712', '20230713', '20230714', '20230717', '20230718',
                        '20230719', '20230720', '20230721', '20230724', '20230725',
                        '20230726', '20230727', '20230728', '20230731', '20230801',
                        '20230802', '20230803', '20230804', '20230807', '20230808',
                        '20230809', '20230810', '20230811', '20230814', '20230815',
                        '20230816', '20230817', '20230818', '20230821', '20230822',
                        '20230823', '20230824', '20230825', '20230828', '20230829',
                        '20230830', '20230831', '20230901', '20230904', '20230905',
                        '20230906', '20230907', '20230908', '20230911', '20230912',
                        '20230913', '20230914', '20230915', '20230918', '20230919',
                        '20230920', '20230921', '20230922', '20230925', '20230926',
                        '20230927', '20230928', '20231009', '20231010', '20231011',
                        '20231012', '20231013', '20231016', '20231017', '20231018',
                        '20231019', '20231020', '20231023', '20231024', '20231025',
                        '20231026', '20231027', '20231030', '20231031', '20231101',
                        '20231102', '20231103', '20231106', '20231107', '20231108',
                        '20231109', '20231110', '20231113', '20231114', '20231115',
                        '20231116', '20231117', '20231120', '20231121', '20231122',
                        '20231123', '20231124', '20231127', '20231128', '20231129',
                        '20231130', '20231201', '20231204', '20231205', '20231206',
                        '20231207', '20231208', '20231211', '20231212', '20231213',
                        '20231214', '20231215', '20231218', '20231219', '20231220',
                        '20231221', '20231222', '20231225', '20231226', '20231227',
                        '20231228', '20231229', '20240102', '20240103', '20240104',
                        '20240105', '20240108', '20240109', '20240110', '20240111',
                        '20240112', '20240115', '20240116', '20240117', '20240118',
                        '20240119', '20240122', '20240123', '20240124', '20240125',
                        '20240126', '20240129', '20240130', '20240131', '20240201',
                        '20240202', '20240205', '20240206', '20240207', '20240208',
                        '20240216', '20240219', '20240220', '20240221', '20240222',
                        '20240223', '20240226', '20240227', '20240228', '20240229',
                        '20240301', '20240304', '20240305', '20240306', '20240307',
                        '20240308', '20240311', '20240312', '20240313', '20240314',
                        '20240315', '20240318', '20240319', '20240320', '20240321',
                        '20240322', '20240325', '20240326', '20240327', '20240328',
                        '20240329', '20240401', '20240402', '20240403', '20240408',
                        '20240409', '20240410', '20240411', '20240412', '20240415',
                        '20240416', '20240417', '20240418', '20240419', '20240422',
                        '20240423', '20240424', '20240425', '20240426', '20240502',
                        '20240503', '20240506', '20240507', '20240508', '20240509',
                        '20240510', '20240513', '20240514', '20240515', '20240516',
                        '20240517', '20240520', '20240521', '20240522', '20240523',
                        '20240524', '20240527', '20240528', '20240529', '20240530',
                        '20240531', '20240603', '20240604', '20240605', '20240606',
                        '20240607', '20240611', '20240612', '20240613', '20240614',
                        '20240617', '20240618', '20240619', '20240620', '20240621',
                        '20240624', '20240625', '20240626', '20240627', '20240628',
                        '20240701', '20240702', '20240703', '20240704', '20240705',
                        '20240708', '20240709', '20240710', '20240711', '20240712',
                        '20240715', '20240716', '20240717', '20240718', '20240719',
                        '20240722', '20240723', '20240724', '20240725', '20240726',
                        '20240729', '20240730', '20240731', '20240801', '20240802',
                        '20240805', '20240806', '20240807', '20240808', '20240809',
                        '20240812', '20240813', '20240814', '20240815', '20240816',
                        '20240819', '20240820', '20240821', '20240822', '20240823',
                        '20240826', '20240827', '20240828', '20240829', '20240830',
                        '20240902', '20240903', '20240904', '20240905', '20240906',
                        '20240909', '20240910', '20240911', '20240912', '20240913',
                        '20240918', '20240919', '20240920', '20240923', '20240924',
                        '20240925', '20240926', '20240927', '20240930', '20241008',
                        '20241009', '20241010', '20241011', '20241014', '20241015',
                        '20241016', '20241017', '20241018', '20241021', '20241022',
                        '20241023', '20241024', '20241025', '20241028', '20241029',
                        '20241030', '20241031', '20241101', '20241104', '20241105',
                        '20241106', '20241107', '20241108', '20241111', '20241112',
                        '20241113', '20241114', '20241115', '20241118', '20241119',
                        '20241120', '20241121', '20241122', '20241125', '20241126',
                        '20241127', '20241128', '20241129', '20241202', '20241203',
                        '20241204', '20241205', '20241206', '20241209', '20241210',
                        '20241211', '20241212', '20241213', '20241216', '20241217',
                        '20241218', '20241219', '20241220', '20241223', '20241224',
                        '20241225', '20241226', '20241227', '20241230', '20241231']

    def get_n_trading_day(self, date=None, n=1):
        try:
            formatted_date = pd.to_datetime(date).strftime('%Y%m%d') if date is not None else time.strftime('%Y%m%d')
            index = self.trading_calendar.index(formatted_date)
            return pd.to_datetime(self.trading_calendar[index + n])
        except Exception as e:
            print(e)

    def check_is_trading_day(self, date=None):
        try:
            formatted_date = pd.to_datetime(date).strftime('%Y%m%d') if date is not None else time.strftime('%Y%m%d')
            return formatted_date in self.trading_calendar
        except Exception as e:
            print(e)


if __name__ == '__main__':
    print(TradingCalendar().get_n_trading_day(date=pd.to_datetime('20230824'), n=1))
